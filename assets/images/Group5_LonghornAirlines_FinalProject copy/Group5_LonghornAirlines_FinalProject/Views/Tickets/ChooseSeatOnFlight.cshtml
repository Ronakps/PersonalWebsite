@model Group5_LonghornAirlines_FinalProject.Models.Ticket

@{
    ViewData["Title"] = "Choose Your Seat";
    var availableSeats = ViewBag.AvailableSeats as List<Seat>;
}

<h1 class="text-center">@ViewData["Title"]</h1>

<form asp-action="Create" method="post" class="seat-selection-form">
    <div class="form-group">
        @Html.HiddenFor(model => model.Reservation.ReservationID)
        @Html.HiddenFor(model => model.Flight.FlightID)
        @Html.HiddenFor(model => model.TicketHolder.UserName)
        @Html.HiddenFor(model => model.Price)
        @Html.HiddenFor(model => model.ModificationFee)
        @Html.HiddenFor(model => model.Upgraded)
        @Html.HiddenFor(model => model.PriceInMiles)

        <label for="Seat" class="form-label">Select Seat:</label>
        <select asp-for="Seat" class="form-control" id="Seat">
            <option value="">Select a seat</option>
            @foreach (var seat in availableSeats)
            {
                <option value="@seat">@seat</option>
            }
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Confirm Seat</button>
</form>

<style>
    .text-center {
        text-align: center;
    }

    .seat-selection-form {
        max-width: 500px;
        margin: auto;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .seat-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

        .seat-table th, .seat-table td {
            text-align: center;
            border: 1px solid #ddd;
            padding: 10px;
        }

        .seat-table th {
            background-color: #f8f9fa;
        }

    .seat-cell {
        font-weight: bold;
        cursor: pointer;
    }

    .available {
        color: green;
    }

    .special-available {
        color: darkblue;
    }

    .taken {
        color: red;
    }
</style>

<table class="seat-table">
    <thead>
        <tr>
            <th>Row</th>
            <th colspan="2">Seats</th>
            <th>Aisle</th>
            <th colspan="2">Seats</th>
        </tr>
    </thead>
    <tbody>
        @{
            var rows = new[]
            {
                new { Row = 1, Seats = new[] { "A1", "", "", "", "B1" } },
                new { Row = 2, Seats = new[] { "A2", "", "", "", "B2" } },
                new { Row = 3, Seats = new[] { "A3", "B3", "", "C3", "D3" } },
                new { Row = 4, Seats = new[] { "A4", "B4", "", "C4", "D4" } },
                new { Row = 5, Seats = new[] { "A5", "B5", "", "C5", "D5" } }
            };
        }
        @foreach (var row in rows)
        {
            <tr>
                <td>@row.Row</td>
                @foreach (var seat in row.Seats)
                {
                    var ticketWithSeat = Model.Flight.Tickets.FirstOrDefault(t => t.Seat.ToString() == seat && t.TicketStatus == TicketStatus.Active);
                    var seatTaken = ticketWithSeat != null;
                    var seatClass = (seat == "A1" || seat == "A2" || seat == "B1" || seat == "B2") ? "special-available" : "available";
                    var cssClass = seatTaken ? "taken" : seatClass;

                    <td class="seat-cell @cssClass">@seat</td>
                }
            </tr>
        }
    </tbody>
</table>


<!-- Existing table structure above -->
<!-- ... -->
<!-- Add a legend below the table -->
<div class="seat-legend">
    <h5>Legend</h5>
    <div class="legend-item">
        <span class="legend-color-box" style="background-color: green;"></span> Economy Class
    </div>
    <div class="legend-item">
        <span class="legend-color-box" style="background-color: darkblue;"></span> First Class 
    </div>
    <div class="legend-item">
        <span class="legend-color-box" style="background-color: red;"></span> Unavailable
    </div>
</div>

<style>
    /* Existing styles */
    /* ... */

    .seat-legend {
        margin-top: 20px;
        text-align: center;
    }

    .legend-item {
        display: inline-flex;
        align-items: center;
        margin-right: 10px; /* Space out legend items */
    }

    .legend-color-box {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 1px solid #ddd; /* Match table cell border */
        margin-right: 5px; /* Space between color box and text */
    }
</style>
